{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 135, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/actions/emailActions.ts"],"sourcesContent":["\n'use server';\n\nimport AWS from 'aws-sdk';\nimport mimemessage from 'mimemessage';\n\ninterface MailData {\n  email: string;\n  subject: string;\n  emailTemplate: string;\n}\n\nexport async function sendMailAction(data: MailData): Promise<{ success: boolean; message: string }> {\n  const accessKeyId = process.env.AWS_ACCESS_KEY_ID;\n  const secretAccessKey = process.env.AWS_SECRET_ACCESS_KEY;\n  const region = process.env.AWS_REGION;\n  const fromEmail = process.env.AWS_SES_FROM_EMAIL;\n\n  if (!accessKeyId || !secretAccessKey || !region || !fromEmail) {\n    console.error('AWS SES environment variables not fully configured.');\n    return { success: false, message: 'Email server configuration error. Please contact support.' };\n  }\n\n  const ses = new AWS.SES({\n    region: region,\n    accessKeyId: accessKeyId,\n    secretAccessKey: secretAccessKey,\n  });\n\n  const emailData = mimemessage.factory({\n    contentType: 'multipart/mixed',\n    body: [],\n  });\n\n  emailData.header('From', `Taxbandits API <${fromEmail}>`);\n  emailData.header('To', data.email);\n  emailData.header('Subject', data.subject);\n\n  const htmlContent = mimemessage.factory({\n    contentType: 'text/html;charset=utf-8', // Added charset\n    body: data.emailTemplate,\n  });\n\n  emailData.body.push(htmlContent);\n\n  const params = {\n    RawMessage: {\n      Data: emailData.toString(),\n    },\n  };\n\n  try {\n    await ses.sendRawEmail(params).promise();\n    return { success: true, message: 'Email sent successfully.' };\n  } catch (err: any) {\n    console.error(`Failed to send email to ${data.email}:`, err);\n    // Provide a more generic error message to the client\n    return { success: false, message: `Failed to send email. Error: ${err.code || err.message || 'Unknown SES error'}` };\n  }\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;;;;;;AAQO,eAAe,eAAe,IAAc;IACjD,MAAM,cAAc,QAAQ,GAAG,CAAC,iBAAiB;IACjD,MAAM,kBAAkB,QAAQ,GAAG,CAAC,qBAAqB;IACzD,MAAM,SAAS,QAAQ,GAAG,CAAC,UAAU;IACrC,MAAM,YAAY,QAAQ,GAAG,CAAC,kBAAkB;IAEhD,IAAI,CAAC,eAAe,CAAC,mBAAmB,CAAC,UAAU,CAAC,WAAW;QAC7D,QAAQ,KAAK,CAAC;QACd,OAAO;YAAE,SAAS;YAAO,SAAS;QAA4D;IAChG;IAEA,MAAM,MAAM,IAAI,wIAAA,CAAA,UAAG,CAAC,GAAG,CAAC;QACtB,QAAQ;QACR,aAAa;QACb,iBAAiB;IACnB;IAEA,MAAM,YAAY,iJAAA,CAAA,UAAW,CAAC,OAAO,CAAC;QACpC,aAAa;QACb,MAAM,EAAE;IACV;IAEA,UAAU,MAAM,CAAC,QAAQ,CAAC,gBAAgB,EAAE,UAAU,CAAC,CAAC;IACxD,UAAU,MAAM,CAAC,MAAM,KAAK,KAAK;IACjC,UAAU,MAAM,CAAC,WAAW,KAAK,OAAO;IAExC,MAAM,cAAc,iJAAA,CAAA,UAAW,CAAC,OAAO,CAAC;QACtC,aAAa;QACb,MAAM,KAAK,aAAa;IAC1B;IAEA,UAAU,IAAI,CAAC,IAAI,CAAC;IAEpB,MAAM,SAAS;QACb,YAAY;YACV,MAAM,UAAU,QAAQ;QAC1B;IACF;IAEA,IAAI;QACF,MAAM,IAAI,YAAY,CAAC,QAAQ,OAAO;QACtC,OAAO;YAAE,SAAS;YAAM,SAAS;QAA2B;IAC9D,EAAE,OAAO,KAAU;QACjB,QAAQ,KAAK,CAAC,CAAC,wBAAwB,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC,EAAE;QACxD,qDAAqD;QACrD,OAAO;YAAE,SAAS;YAAO,SAAS,CAAC,6BAA6B,EAAE,IAAI,IAAI,IAAI,IAAI,OAAO,IAAI,qBAAqB;QAAC;IACrH;AACF;;;IA/CsB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 207, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/.next-internal/server/app/request-by-email/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {sendMailAction as '40abcc30fa9470bdf6c8beaa3ba50d30584eb5294d'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 265, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/request-by-email/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/request-by-email/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/request-by-email/page.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAqS,GAClU,mEACA","debugId":null}},
    {"offset": {"line": 279, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/request-by-email/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/request-by-email/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/request-by-email/page.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAiR,GAC9S,+CACA","debugId":null}},
    {"offset": {"line": 293, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}}]
}